<div class="row">
  <div class="col-lg-12 col-sm-12 col-xs-12">
    <div class="white-box">
      <div class="vtabs customvtab">
        <ul    class="nav projectListing" *ngIf="dashboardService.projectsList.length > 0">
          <li class="tab " [ngClass]="{'active':dashboardService.selectedProjectIndex == i}" *ngFor="let project of dashboardService.projectsList; let i = index">
            <a [title]="project.projectName" (click)="dashboardService.selectedProjectIndex = i;getrelatedScope();loadProjectHealthData(project.id);
             editingField='nothing';" data-toggle="tab" href="#vhome4" aria-expanded="false"><span > {{project.projectName}}</span> </a>
          </li>
        </ul>
        <h2 *ngIf="dashboardService.projectsList.length === 0"> No projects to show.</h2>
        <div class="tab-content" *ngIf="dashboardService.projectsList.length > 0 && dashboardService.selectedProjectIndex!==-1">
          <div id="vhome4" class="tab-pane active">
            <div class="row">
              <div class="ribbon-wrapper col-md-11">
                <div class="ribbon ribbon-default">Project information:</div>
                <div class="ribbon-content">
                  <div class="col-md-4 p-0">
                    <div class="row">
                      <label>Project name:&nbsp;</label>
                      <span> {{dashboardService.projectsList[dashboardService.selectedProjectIndex].projectName}}</span>
                    </div>
                  </div>
                  <div class="col-md-4 p-0">
                    <div class="row">
                      <label>Project code:</label>
                      <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].projectCode}}</span>
                    </div>
                  </div>
                  <div class="col-md-4 p-0">
                    <div class="row">
                      <label>Account manager:</label>
                      <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].AccountManager}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <table class="table-bordered">
                <thead>
                <tr>
                  <th>Scope</th>
                  <th>Schedule</th>
                  <th>Cost</th>
                  <th>Resource</th>
                  <th>Quality</th>
                  <th>CSat</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                  <td>
                    <button *ngIf="selectedProjectScope.scopeStatus==='good'" type="button" class="btn btn-success btn-circle"><i class="fa fa-check"></i> </button>
                    <button *ngIf="selectedProjectScope.scopeStatus==='issue'" type="button" class="btn btn-warning btn-circle"><i class="fa fa-exclamation"></i> </button>
                    <button *ngIf="selectedProjectScope.scopeStatus==='risk'" type="button" class="btn btn-danger btn-circle"><i class="fa fa-times"></i> </button>
                  </td>
                  <td>
                    <button *ngIf="selectedProjectScope.scheduleStatus==='good'" type="button" class="btn btn-success btn-circle"><i class="fa fa-check"></i> </button>
                    <button *ngIf="selectedProjectScope.scheduleStatus==='issue'" type="button" class="btn btn-warning btn-circle"><i class="fa fa-exclamation"></i> </button>
                    <button *ngIf="selectedProjectScope.scheduleStatus==='risk'" type="button" class="btn btn-danger btn-circle"><i class="fa fa-times"></i> </button>
                  </td>
                  <td>
                    <button *ngIf="selectedProjectScope.costStatus==='good'" type="button" class="btn btn-success btn-circle"><i class="fa fa-check"></i> </button>
                    <button *ngIf="selectedProjectScope.costStatus==='issue'" type="button" class="btn btn-warning btn-circle"><i class="fa fa-exclamation"></i> </button>
                    <button *ngIf="selectedProjectScope.costStatus==='risk'" type="button" class="btn btn-danger btn-circle"><i class="fa fa-times"></i> </button>

                  </td>
                  <td>
                    <button *ngIf="selectedProjectScope.resourceStatus==='good'" type="button" class="btn btn-success  btn-circle"><i class="fa fa-check"></i> </button>
                    <button *ngIf="selectedProjectScope.resourceStatus==='issue'" type="button" class="btn btn-warning btn-circle"><i class="fa fa-exclamation"></i> </button>
                    <button *ngIf="selectedProjectScope.resourceStatus==='risk'" type="button" class="btn btn-danger btn-circle"><i class="fa fa-times"></i> </button>
                  </td>
                  <td>
                    <button *ngIf="selectedProjectScope.qualityStatus==='good'" type="button" class="btn btn-success btn-circle"><i class="fa fa-check"></i> </button>
                    <button *ngIf="selectedProjectScope.qualityStatus==='issue'" type="button" class="btn btn-warning btn-circle"><i class="fa fa-exclamation"></i> </button>
                    <button *ngIf="selectedProjectScope.qualityStatus==='risk'" type="button" class="btn btn-danger btn-circle"><i class="fa fa-times"></i> </button>
                  </td>
                  <td>
                    <button *ngIf="selectedProjectScope.satisfactionStatus==='good'" type="button" class="btn btn-success btn-circle"><i class="fa fa-check"></i> </button>
                    <button *ngIf="selectedProjectScope.satisfactionStatus==='issue'" type="button" class="btn btn-warning btn-circle"><i class="fa fa-exclamation"></i> </button>
                    <button *ngIf="selectedProjectScope.satisfactionStatus==='risk'" type="button" class="btn btn-danger btn-circle"><i class="fa fa-times"></i> </button>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
            <br>
            <div class="row">
              <div class="ribbon-wrapper col-md-6">
                <div class="ribbon ribbon-default">Initial PMO</div>
                <div class="ribbon-content">
                  <label>Project cost:</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].initialPMOprojectCosts}}</span>
                  <span>€</span><br>
                  <label>Man day affectation:&nbsp;</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].initialPMOmanDayAffectation}}</span><br>
                  <label>Target profitability:&nbsp;</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].initialPMOtargetProfitability}}</span>
                  <span>%</span><br>
                  <label>Threshold profitability:&nbsp;</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].initialPMOthresholdProfitability}}</span>
                  <span>%</span><br>
                </div>
              </div>
              <div class="ribbon-wrapper col-md-5">
                <div class="ribbon ribbon-default">Approved PMO</div>
                <div class="ribbon-content">
                  <label>Project cost:</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].approvedPMOprojectCosts}}</span>
                  <span>€</span><br>
                  <label>Man day affectation:&nbsp;</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].approvedPMOmanDayAffectation}}</span><br>
                  <label>Target profitability:&nbsp;</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].approvedPMOtargetProfitability}}</span>
                  <span>%</span><br>
                  <label>Threshold profitability:&nbsp;</label>
                  <span>{{dashboardService.projectsList[dashboardService.selectedProjectIndex].approvedPMOthresholdProfitability}}</span>
                  <span>%</span><br>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="ribbon-wrapper col-md-11">
                <div class="ribbon ribbon-default">Current €</div>
                <div class="ribbon-content">
                  <div class="col-md-4">
                    <label>Current delivery:</label>
                    <input type="number" [(ngModel)]="cloneProjectHealth.currentDelivery" *ngIf="editingField == 'earnedValues'">
                    <span *ngIf="editingField != 'earnedValues'">{{projectHealth.currentDelivery}}</span>
                    <span>€</span><br>
                  </div>
                  <div class="col-md-4">
                    <label>Current expense:</label>
                    <input type="number" [(ngModel)]="cloneProjectHealth.currentExpense" *ngIf="editingField == 'earnedValues'">
                    <span *ngIf="editingField != 'earnedValues'">{{projectHealth.currentExpense}}</span>
                    <span>€</span><br>
                  </div>
                  <div class="col-md-4">
                    <label>Planned expense:</label>
                    <input type="number" [(ngModel)]="cloneProjectHealth.plannedExpense" *ngIf="editingField == 'earnedValues'">
                    <span *ngIf="editingField != 'earnedValues'">{{projectHealth.plannedExpense}}</span>
                    <span>€</span>
                  </div>
                </div>
                <button *ngIf="editingField != 'earnedValues'" type="button" class="btn btn-default" (click)="editHealth();editingField='earnedValues';">Edit</button>
                <button *ngIf="editingField == 'earnedValues'" type="button" class="btn btn-primary" (click)="saveHealth();editingField='nothing';">Save</button>
                <button *ngIf="editingField == 'earnedValues'" type="button" class="btn btn-default" (click)="editingField='nothing'">Cancel</button>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="ribbon-wrapper col-md-11">
                <div class="ribbon ribbon-default">Plan</div>
                <div class="ribbon-content">
                  <div class="col-md-4">
                    <label>Initial end date:</label>
                    <span>{{projectHealth.initialEndDate.substring(0, 10)}}</span>
                  </div>
                  <div class="col-md-5">
                    <label>Planned end date:</label>
                    <span>{{projectHealth.plannedEndDate.substring(0, 10)}}</span>
                  </div>
                  <div class="col-md-3">
                    <label>Delay:</label>
                    <span>0 Days</span>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="ribbon-wrapper col-md-11">
                <div class="ribbon ribbon-default">Status</div>
                <div class="ribbon-content">
                  <textarea [(ngModel)]="cloneProjectHealth.healthStatus" *ngIf="editingField == 'healthStatus'"></textarea>
                  <p *ngIf="editingField != 'healthStatus'" >
                    {{projectHealth.healthStatus}}
                  </p>
                </div>
                <button *ngIf="editingField != 'healthStatus'" type="button" class="btn btn-default" (click)="editHealth();editingField='healthStatus';">Edit</button>
                <button *ngIf="editingField == 'healthStatus'" type="button" class="btn btn-primary" (click)="saveHealth();editingField='nothing';">Save</button>
                <button *ngIf="editingField == 'healthStatus'" type="button" class="btn btn-default" (click)="editingField='nothing'">Cancel</button>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="ribbon-wrapper col-md-11">
                <div class="ribbon ribbon-default">Planned actions</div>
                <div class="ribbon-content">
                  <textarea [(ngModel)]="cloneProjectHealth.plannedAction" *ngIf="editingField == 'plannedAction'"></textarea>
                  <p *ngIf="editingField != 'plannedAction'" >
                    {{projectHealth.plannedAction}}
                  </p>
                </div>
                <button *ngIf="editingField != 'plannedAction'" type="button" class="btn btn-default" (click)="editHealth();editingField='plannedAction';">Edit</button>
                <button *ngIf="editingField == 'plannedAction'" type="button" class="btn btn-primary" (click)="saveHealth();editingField='nothing';">Save</button>
                <button *ngIf="editingField == 'plannedAction'" type="button" class="btn btn-default" (click)="editingField='nothing'">Cancel</button>
              </div>
              </div>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

